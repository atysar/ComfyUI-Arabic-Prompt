# عقدة الترجمة الفورية بالذكاء الاصطناعي لـ ComfyUI (Arabic Prompt Node)

مجموعة من العقد المخصصة لبرنامج ComfyUI تم تطويرها لتسهيل كتابة الأوامر (Prompts) باللغة العربية. تقوم هذه العقدة بترجمة النص العربي الذي تكتبه إلى اللغة الإنجليزية "خلف الكواليس" باستخدام نموذج لغة يعمل محليًا على جهازك عبر برنامج GPT4All، ثم تقوم بتمرير الترجمة إلى مُشفِّر CLIP، مما يسمح لك بالتفاعل مع نماذج توليد الصور بلغتك الأم.

## ✨ المميزات الرئيسية

- **اكتب باللغة العربية:** لا حاجة لترجمة أفكارك يدويًا. اكتب البرومبت مباشرة باللغة العربية.
- **يعمل محليًا بالكامل:** لا حاجة للاشتراك في خدمات API خارجية. كل شيء يعمل على جهازك مما يضمن الخصوصية الكاملة.
- **سهل الإعداد:** يتطلب خطوات بسيطة لتشغيل الخادم المحلي.
- **تكامل سلس:** يندمج بشكل طبيعي في مسار عمل ComfyUI القياسي.

---

## ⚙️ المتطلبات الأساسية (يجب القيام بها أولاً)

قبل تثبيت العقدة، يجب عليك إعداد الخادم المحلي الذي سيقوم بمهمة الترجمة.

### الخطوة 1: تحميل وتثبيت برنامج GPT4All

1.  اذهب إلى الموقع الرسمي: **[gpt4all.io](https://gpt4all.io/index.html)** وقم بتحميل البرنامج المتوافق مع نظام التشغيل لديك (Windows).
2.  قم بتثبيت البرنامج باتباع الخطوات التي تظهر على الشاشة.

### الخطوة 2: تحميل نموذج اللغة (LLM)

1.  افتح برنامج GPT4All.
2.  ستظهر لك نافذة لاختيار وتنزيل النماذج. ابحث في القائمة عن النموذج التالي **بالاسم الدقيق**:
    ```
    Meta-Llama-3.1-8B-Instruct-128k-Q4_0.gguf
    ```
3.  اضغط على زر "Download" بجانب اسم النموذج وانتظر حتى يكتمل التحميل.

![صورة توضح قائمة تحميل النماذج في GPT4All](رابط-لصورة-هنا.jpg)  <!-- اختياري: يمكنك رفع صورة لشاشة التحميل ووضع رابطها هنا -->

---

## 🛠️ طريقة تثبيت العقدة في ComfyUI

### الطريقة 1: التثبيت اليدوي (موصى به)

1.  اضغط على الزر الأخضر **`< > Code`** في أعلى هذه الصفحة، ثم اختر **"Download ZIP"**.
2.  قم بفك ضغط الملف الذي تم تحميله.
3.  سيكون لديك مجلد اسمه `ComfyUI-Arabic-Prompt-Node-main` (أو ما شابه). **أعد تسميته** ليصبح `Aty_Arabic_Node` (أو أي اسم بسيط تختاره).
4.  انسخ هذا المجلد وضعه داخل مجلد العقد المخصصة في ComfyUI. المسار عادة يكون:
    `C:\ComfyUI\custom_nodes\`
5.  **أعد تشغيل ComfyUI بالكامل.**

### الطريقة 2: عبر Git Clone

1.  افتح نافذة الأوامر (CMD) في مجلد `custom_nodes`.
2.  قم بنسخ المستودع باستخدام الأمر التالي (استبدل `your-username/repo-name` باسم المستخدم والمستودع الخاصين بك):
    ```bash
    git clone https://github.com/your-username/repo-name.git
    ```
3.  **أعد تشغيل ComfyUI بالكامل.**

---

## 🚀 الإعداد والتشغيل (خطوات حاسمة)

لكي تعمل العقدة، يجب أن يكون خادم GPT4All يعمل في الخلفية.

### أولاً: تشغيل خادم GPT4All

1.  افتح برنامج GPT4All.
2.  من الواجهة الرئيسية، انقر على أيقونة **الكرة الأرضية (🌐)** في الأعلى لتفعيل وضع الخادم.
3.  تأكد من اختيار النموذج الصحيح (`Llama-3.1...`) من القائمة المنسدلة في الأعلى.
4.  اضغط على زر **"Start Server"**. سيظهر لك أن الخادم يعمل الآن.
5.  **لا تغلق برنامج GPT4All.** اتركه يعمل في الخلفية طوال فترة استخدامك للعقدة في ComfyUI.

![صورة لواجهة خادم GPT4All](رابط-لصورة-الخادم-هنا.jpg) <!-- اختياري: صورة لواجهة الخادم وهي تعمل -->

### ثانيًا: التأكد من اسم المودل في ملف العقدة

لضمان عدم حدوث أي خطأ، يجب أن يتطابق اسم المودل في الكود مع اسم الملف الذي قمت بتحميله.

1.  اذهب إلى مجلد العقدة: `C:\ComfyUI\custom_nodes\Aty_Arabic_Node\`
2.  افتح ملف `arabic_prompt_node.py` باستخدام أي محرر نصوص (مثل Notepad).
3.  ابحث عن السطر التالي داخل الملف:
    ```python
    model_filename = "Meta-Llama-3.1-8B-Instruct-128k-Q4_0.gguf"
    ```
4.  **تأكد 100%** من أن الاسم بين علامتي التنصيص مطابق تمامًا لاسم ملف المودل الذي حملته في GPT4All. إذا كان مختلفًا، قم بتعديله ليطابق ثم احفظ الملف.

## 💡 طريقة الاستخدام

1.  في ComfyUI، أضف عقدة **`  Aty Arabic Prompt PL`**.
2.  صل مدخل `clip` من عقدة `Load Checkpoint` بمدخل `clip` في عقدتنا.
3.  اكتب وصف الصورة الذي تريده باللغة العربية في مربع النص.
4.  صل مخرج `positive_conditioning` بمدخل `positive` في عقدة `KSampler`.
5.  أكمل مسار عملك كالمعتاد واضغط `Queue Prompt`.

## ⚠️ ملاحظات هامة واستكشاف الأخطاء

- **"العقدة لونها أحمر أو لا تعمل"**: تأكد أولاً أن خادم GPT4All يعمل في الخلفية. هذا هو السبب الأكثر شيوعًا للمشاكل.
- **"الترجمة تأخذ وقتًا"**: هذا طبيعي. تشغيل نموذج لغة كبير على جهازك يستهلك موارد ويتطلب بعض الوقت لمعالجة النص. كن صبورًا.
- **"تظهر رسالة خطأ في نافذة الأوامر"**: تحقق مرة أخرى من تطابق اسم المودل في ملف `.py` مع اسم المودل الفعلي.
---

## 🤝 المساهمة والدعم (Contribution & Support)

هذا المشروع هو عمل فردي تم تطويره في وقت الفراغ. إذا وجدت هذه العقدة مفيدة وترغب في المساهمة في تطويرها أو تقديم الدعم، فهناك عدة طرق يمكنك من خلالها المساعدة.

### 🐛 الإبلاغ عن الأخطاء وطلب الميزات

- **أفضل طريقة للتواصل بخصوص المشاكل التقنية** هي عبر فتح "قضية" جديدة (New Issue) في هذا المستودع على GitHub.
- هذا يساعد على تنظيم العمل وتتبع المشاكل وحلها بشكل فعال، ويسمح للآخرين الذين قد يواجهون نفس المشكلة برؤية الحلول.
- **[لفتح قضية جديدة (New Issue)، اضغط هنا](git clone https://github.com/atysar/ComfyUI-Arabic-Prompt.git)**  *(ملاحظة: استبدل `your-username/repo-name` باسم المستخدم والمستودع الخاصين بك).*

### ❤️ دعم المشروع ماديًا (اختياري)

إذا أعجبتك هذه الأداة وساعدتك في عملك، يمكنك دعمي للمساعدة في تغطية تكاليف التطوير المستقبلي وشرب المزيد من القهوة للحفاظ على التركيز! ☕

- **أنصحك بإنشاء حساب على موقع [Buy Me a Coffee](https://www.buymeacoffee.com).** إنه موقع سهل جدًا ومشهور للمشاريع الصغيرة، ويسمح للناس بدعمك بمبلغ بسيط كشكر وتقدير.
- بعد إنشاء حسابك، ستحصل على رابط خاص بك. ضعه هنا.

**مثال على كيفية وضع الرابط:**

[![اشترِ لي قهوة](https://img.buymeacoffee.com/button-api/?text=Buy%20me%20a%20coffee&emoji=&slug=atyasara22f&button_colour=FFDD00&font_colour=000000&font_family=Inter&outline_colour=000000&coffee_colour=ffffff)](https://www.buymeacoffee.com/atyasara22f)

*(ملاحظة: استبدل `your-username` في الرابطين أعلاه باسم المستخدم الخاص بك على موقع Buy Me a Coffee).*

---
